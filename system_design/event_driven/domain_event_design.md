도메인 이벤트: 디자인 및 구현...microsoft
=
https://learn.microsoft.com/ko-kr/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/domain-events-design-implementation

도메인 이벤트란?
=
이벤트는 과거에 발생한 것
도메인 이벤트란 동일한 도메인의 다른 부분(프로세스 중)을 인식하고자 하는 도메인에서 발생한 이벤트

도메인 이벤트의 중요한 이점은 부작용이 명시적으로 표현될 수 있다는 것
이벤트를 사용하지 않고 코딩할 경우, 규칙은 암시적으로 코드에 결합되고,  코드를 조사해서 규칙을 구현할 수 있습니다.
반면에 도메인 이벤트를 사용하면 DomainEvent와 적어도 하나 이상의 DomainEventHandler가 포함되어 있기 때문에 개념을 명시적으로 만듭니다.

데이터베이스 트랜잭션과 마찬가지로 도메인 이벤트와 관련된 모든 작업이 성공적으로 완료되거나 수행되지 않아야 합니다.

도메인 이벤트와 그 파생 작업(이벤트 처리기가 관리하는 이후에 트리거되는 동작)은 거의 즉시, 일반적으로 프로세스 내에서 그리고 동일한 도메인 내에서 발생해야 합니다. 따라서 도메인 이벤트는 동기 또는 비동기일 수 있습니다. 단, 통합 이벤트는 항상 비동기여야 합니다.

도메인 이벤트와 통합 이벤트
=
도메인 및 통합 이벤트는 의미상으로 동일합니다. 즉, 방금 발생한 일에 대한 알림입니다. 하지만 구현은 달라야 합니다.

통합 이벤트의 목적은 커밋된 트랜잭션 및 업데이트를 다른 마이크로 서비스, 바인딩된 컨텍스트 또는 외부 애플리케이션과 같은 추가적인 하위 시스템에 전파하는 것입니다. 따라서 엔터티가 성공적으로 지속되고 있는 경우에만 발생해야 하며, 그렇지 않으면 전체 작업이 발생하지 않은 것처럼 처리됩니다.

동일한 도메인 내의 여러 집합체 전반에서 파생 작업을 트리거하는 기본 방법인 도메인 이벤트
=
하나의 집계 인스턴스와 관련된 명령을 실행하기 위해 하나 이상의 추가 집합체에서 추가 도메인 규칙을 실행해야 하는 경우에는 해당 파생 작업이 도메인 이벤트에 의해 트리거되도록 설계하고 구현해야 합니다.

-> 한 도메인 안데서 다른 어그리게이트를 가지면 이벤트를 던져서 처리해라!

도메인 모델 계층은 도메인 로직에만 집중해야 하며 리포지토리를 이용한 파생 작업 지속 동작 및 처리기와 같은 애플리케이션 인프라는 신경 쓸 필요가 없습니다. 도메인 이벤트 처리기는 어플리케이션 레이어에 있으면 됩니다.

이벤트를 이용하면 코드에 의한 접착이 생기지 않고, 테스트 코드도 그냥 새롭게 만들면 됩니다.  SOLID의 개방/폐쇄 원칙에 보다 적합합니다. 또 SRP(단일 책임 원칙)에 보다 가깝습니다.

애플리케이션 계층에서 동일한 도메인 이벤트에 대한 여러 처리기가 있을 수 있으며, 하나의 처리기는 집계 간의 일관성을 해결할 수 있으며, 다른 처리기는 통합 이벤트를 게시할 수 있으므로 다른 마이크로 서비스와 함께 처리할 수 있습니다. 이벤트 처리기는 일반적으로 애플리케이션 계층에 있는데, 리포지토리나 애플리케이션 API와 같은 인프라 개체를 마이크로 서비스의 동작에 사용하기 때문입니다.

집합체 전반의 단일 트랜잭션 및 집합체 전반의 최종 일관성
=
높은 확장성이 필요한 대규모 애플리케이션에는 데이터베이스 잠금 수가 상당할 것이라는 생각 때문입니다. 확장성이 높은 애플리케이션은 여러 집합체 간에 즉각적인 트랜잭션 일관성이 필요하지 않다는 팩트를 수용하면 최종 일관성 개념을 받아들이는 데 도움이 됩니다. 비즈니스에서 원자성 변경은 필요하지 않은 경우가 많으며 특정 작업에 원자성 트랜잭션이 필요한지 여부를 결정하는 것은 어떤 경우든 도메인 전문가의 책임입니다. 
